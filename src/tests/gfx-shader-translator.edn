(def timestep (/ 1.0 120.0))

(defloop gfx
  (Setup
   0.0 >= .time

   {:EntryPoint (->
                 (Shader.ReadInput "texCoord0" :Dimension 2) >= .uv
                 .uv (Take 0) >== .global
                 .uv (Take 1) >= .local
                 .global = .u
                 .local = .v
                 (Float4 .u .v 0.0 1.0)
                 (Shader.WriteOutput "color") ; End shader
                 )}(GFX.EffectPass) >> .render-steps)

  (GFX.Render :Steps .render-steps))

(defmesh root)
(schedule root (Wire "test-wire" :Looped :LStack
                     (GFX.MainWindow :Title "SDL Window" :Width 1280 :Height 720 :Debug false :Contents
                                     (Step gfx))))
(run root timestep 100)